(function(window,$,undefined){'use strict';function selectText(element){var range,selection;document.body.createTextRange?(range=document.body.createTextRange(),range.moveToElementText(element),range.select()):window.getSelection&&(selection=window.getSelection(),range=document.createRange(),range.selectNodeContents(element),selection.removeAllRanges(),selection.addRange(range));}function fetchAllOptions(){var values={};return $('form.sw-admin-settings-form input, form.sw-admin-settings-form select, form.sw-admin-settings-form textarea').each(function(){var $field=$(this);var name=$field.attr('name');var value;'checkbox'===$field.attr('type')?value=$field.prop('checked'):value=$field.val(),values[name]=value;}),values.newOrderOfIcons={},$('.sw-active i').each(function(){var network=$(this).data('network');values.newOrderOfIcons[network]=network;}),values;}function conditionalFields(){$('div[dep]').each(function(){var conDep=$(this).attr('dep');var conDepVal=$.parseJSON($(this).attr('dep_val'));var value;$('[name="'+conDep+'"]').attr('type')=='checkbox'?value=$('[name="'+conDep+'"]').prop('checked'):value=$('[name="'+conDep+'"]').val(),$.inArray(value,conDepVal)!==-1&&$('[name="'+conDep+'"]').parent('.sw-grid').is(':visible')?$(this).show():$(this).hide();}),swp_check_val('floatStyleSource')==0&&(swp_select_val('sideDColorSet')=='customColor'||swp_select_val('sideDColorSet')=='ccOutlines'||swp_select_val('sideIColorSet')=='customColor'||swp_select_val('sideIColorSet')=='ccOutlines'||swp_select_val('sideOColorSet')=='customColor'||swp_select_val('sideOColorSet')=='ccOutlines')?$('.sideCustomColor_wrapper').slideDown():$('.sideCustomColor_wrapper').slideUp();}function swp_select_val(name){return $('select[name="'+name+'"]').val();}function swp_check_val(name){return $('[name="'+name+'"]').prop('checked');}function headerMenuInit(){var offset=$('.sw-top-menu').offset();var width=$('.sw-top-menu').width();$('.sw-top-menu').css({position:'fixed',left:offset.left,top:offset.top,width:width}),$('.sw-admin-wrapper').css('padding-top','75px');}function tabNavInit(){$('.sw-tab-selector').on('click',function(event){event.preventDefault?event.preventDefault():event.returnValue=!1,$('html, body').animate({scrollTop:0},0);var tab=$(this).attr('data-link');$('.sw-admin-tab').hide(),$('#'+tab).show(),$('.sw-header-menu li').removeClass('sw-active-tab'),$(this).parents('li').addClass('sw-active-tab'),'swp_styles'===tab&&socialWarfarePlugin.activateHoverStates(),conditionalFields();});}function checkboxesInit(){$('.sw-checkbox-toggle').on('click',function(){var status=$(this).attr('status');var elem=$(this).attr('field');'on'===status?($(this).attr('status','off'),$(elem).prop('checked',!1)):($(this).attr('status','on'),$(elem).prop('checked',!0)),saveColorToggle(),conditionalFields();});}function populateOptions(){$('form.sw-admin-settings-form input, form.sw-admin-settings-form select').on('change',function(){conditionalFields(),socialWarfarePlugin.newOptions=fetchAllOptions(),saveColorToggle();}),socialWarfarePlugin.defaultOptions=fetchAllOptions();}function saveColorToggle(){socialWarfarePlugin.newOptions=fetchAllOptions(),JSON.stringify(socialWarfarePlugin.newOptions)!==JSON.stringify(socialWarfarePlugin.defaultOptions)?$('.sw-save-settings').removeClass('sw-navy-button').addClass('sw-red-button'):$('.sw-save-settings').removeClass('sw-red-button').addClass('sw-navy-button');}function handleSettingSave(){$('.sw-save-settings').on('click',function(event){event.preventDefault?event.preventDefault():event.returnValue=!1,loadingScreen();var settings=fetchAllOptions();console.log(settings);var data={action:'swp_store_settings',security:swpAdminOptionsData.optionsNonce,settings:settings};$.post(ajaxurl,data,function(response){clearLoadingScreen(),console.log($.parseJSON(response)),socialWarfarePlugin.defaultOptions=fetchAllOptions(),saveColorToggle();});});}function loadingScreen(){$('body').append('<div class="sw-loading-bg"><div class="sw-loading-message">Saving Changes</div></div>');}function clearLoadingScreen(){$('.sw-loading-message').html('Success!').removeClass('sw-loading-message').addClass('sw-loading-complete'),$('.sw-loading-bg').delay(1000).fadeOut(1000),setTimeout(function(){$('.sw-loading-bg').remove();},2000);}function updateCustomColor(){var visualTheme=$('select[name="visualTheme"]').val();var dColorSet=$('select[name="dColorSet"]').val();var iColorSet=$('select[name="iColorSet"]').val();var oColorSet=$('select[name="oColorSet"]').val();$('style.swp_customColorStuff').remove();var colorCode=$('input[name="customColor"]').val();var customCSS='';(dColorSet=='customColor'||iColorSet=='customColor'||oColorSet=='customColor')&&(customCSS='.nc_socialPanel.swp_d_customColor a, html body .nc_socialPanel.swp_i_customColor .nc_tweetContainer:hover a, body .nc_socialPanel.swp_o_customColor:hover a {color:white} .nc_socialPanel.swp_d_customColor .nc_tweetContainer, html body .nc_socialPanel.swp_i_customColor .nc_tweetContainer:hover, body .nc_socialPanel.swp_o_customColor:hover .nc_tweetContainer {background-color:'+colorCode+';border:1px solid '+colorCode+';}'),(dColorSet=='ccOutlines'||iColorSet=='ccOutlines'||oColorSet=='ccOutlines')&&(customCSS=customCSS+' .nc_socialPanel.swp_d_ccOutlines a, html body .nc_socialPanel.swp_i_ccOutlines .nc_tweetContainer:hover a, body .nc_socialPanel.swp_o_ccOutlines:hover a { color:'+colorCode+'; } .nc_socialPanel.swp_d_ccOutlines .nc_tweetContainer, html body .nc_socialPanel.swp_i_ccOutlines .nc_tweetContainer:hover, body .nc_socialPanel.swp_o_ccOutlines:hover .nc_tweetContainer { background:transparent; border:1px solid '+colorCode+'; }'),$('head').append('<style type="text/css" class="swp_customColorStuff">'+customCSS+'</style>');}function updateTheme(){var visualTheme=$('select[name="visualTheme"]').val();var dColorSet=$('select[name="dColorSet"]').val();var iColorSet=$('select[name="iColorSet"]').val();var oColorSet=$('select[name="oColorSet"]').val();var buttonsClass='swp_'+visualTheme+' swp_d_'+dColorSet+' swp_i_'+iColorSet+' swp_o_'+oColorSet;void 0===socialWarfarePlugin.lastClass&&(console.log('boom'),socialWarfarePlugin.lastClass='swp_flatFresh swp_d_fullColor swp_i_fullColor swp_o_fullColor');var buttonsClass='swp_'+visualTheme+' swp_d_'+dColorSet+' swp_i_'+iColorSet+' swp_o_'+oColorSet;$('.nc_socialPanel').removeClass(socialWarfarePlugin.lastClass).addClass(buttonsClass),socialWarfarePlugin.lastClass=buttonsClass;var lastClass=buttonsClass;dColorSet=='customColor'||dColorSet=='ccOutlines'||iColorSet=='customColor'||iColorSet=='ccOutlines'||oColorSet=='customColor'||oColorSet=='ccOutlines'?($('.customColor_wrapper').slideDown(),updateCustomColor()):$('.customColor_wrapper').slideUp();}function updateButtonPreviews(){var availableOptions={flatFresh:{fullColor:'Full Color',lightGray:'Light Gray',mediumGray:'Medium Gray',darkGray:'Dark Gray',lgOutlines:'Light Gray Outlines',mdOutlines:'Medium Gray Outlines',dgOutlines:'Dark Gray Outlines',colorOutlines:'Color Outlines',customColor:'Custom Color',ccOutlines:'Custom Color Outlines'},leaf:{fullColor:'Full Color',lightGray:'Light Gray',mediumGray:'Medium Gray',darkGray:'Dark Gray',lgOutlines:'Light Gray Outlines',mdOutlines:'Medium Gray Outlines',dgOutlines:'Dark Gray Outlines',colorOutlines:'Color Outlines',customColor:'Custom Color',ccOutlines:'Custom Color Outlines'},pill:{fullColor:'Full Color',lightGray:'Light Gray',mediumGray:'Medium Gray',darkGray:'Dark Gray',lgOutlines:'Light Gray Outlines',mdOutlines:'Medium Gray Outlines',dgOutlines:'Dark Gray Outlines',colorOutlines:'Color Outlines',customColor:'Custom Color',ccOutlines:'Custom Color Outlines'},threeDee:{fullColor:'Full Color',lightGray:'Light Gray',mediumGray:'Medium Gray',darkGray:'Dark Gray'},connected:{fullColor:'Full Color',lightGray:'Light Gray',mediumGray:'Medium Gray',darkGray:'Dark Gray',lgOutlines:'Light Gray Outlines',mdOutlines:'Medium Gray Outlines',dgOutlines:'Dark Gray Outlines',colorOutlines:'Color Outlines',customColor:'Custom Color',ccOutlines:'Custom Color Outlines'},shift:{fullColor:'Full Color',lightGray:'Light Gray',mediumGray:'Medium Gray',darkGray:'Dark Gray',lgOutlines:'Light Gray Outlines',mdOutlines:'Medium Gray Outlines',dgOutlines:'Dark Gray Outlines',colorOutlines:'Color Outlines',customColor:'Custom Color',ccOutlines:'Custom Color Outlines'}};if(0===$('select[name="visualTheme"]').length)return;var visualTheme=$('select[name="visualTheme"]').val();var dColorSet=$('select[name="dColorSet"]').val();var iColorSet=$('select[name="iColorSet"]').val();var oColorSet=$('select[name="oColorSet"]').val();$('select[name="dColorSet"] option, select[name="iColorSet"] option, select[name="oColorSet"] option').remove(),$.each(availableOptions[visualTheme],function(index,value){index===dColorSet?$('select[name="dColorSet"]').append('<option value="'+index+'" selected>'+value+'</option>'):$('select[name="dColorSet"]').append('<option value="'+index+'">'+value+'</option>'),index===iColorSet?$('select[name="iColorSet"]').append('<option value="'+index+'" selected>'+value+'</option>'):$('select[name="iColorSet"]').append('<option value="'+index+'">'+value+'</option>'),index===oColorSet?$('select[name="oColorSet"]').append('<option value="'+index+'" selected>'+value+'</option>'):$('select[name="oColorSet"]').append('<option value="'+index+'">'+value+'</option>'),dColorSet=='customColor'||dColorSet=='ccOutlines'||iColorSet=='customColor'||iColorSet=='ccOutlines'||oColorSet=='customColor'||oColorSet=='ccOutlines'?($('.customColor_wrapper').slideDown(),updateCustomColor()):$('.customColor_wrapper').slideUp();}),$('select[name="dColorSet"], select[name="iColorSet"], select[name="oColorSet"]').on('change',updateTheme),$('select[name="visualTheme"]').on('change',function(){var visualTheme=$('select[name="visualTheme"]').val();var dColorSet=$('select[name="dColorSet"]').val();var iColorSet=$('select[name="iColorSet"]').val();var oColorSet=$('select[name="oColorSet"]').val();var i=0;var array=availableOptions[visualTheme];var dColor=array.hasOwnProperty(dColorSet);var iColor=array.hasOwnProperty(iColorSet);var oColor=array.hasOwnProperty(oColorSet);$('select[name="dColorSet"] option, select[name="iColorSet"] option, select[name="oColorSet"] option').remove(),$.each(availableOptions[visualTheme],function(index,value){index===dColorSet||dColor==0&&i==0?$('select[name="dColorSet"]').append('<option value="'+index+'" selected>'+value+'</option>'):$('select[name="dColorSet"]').append('<option value="'+index+'">'+value+'</option>'),index===iColorSet||iColor==0&&i==0?$('select[name="iColorSet"]').append('<option value="'+index+'" selected>'+value+'</option>'):$('select[name="iColorSet"]').append('<option value="'+index+'">'+value+'</option>'),index===oColorSet||oColor==0&&i==0?$('select[name="oColorSet"]').append('<option value="'+index+'" selected>'+value+'</option>'):$('select[name="oColorSet"]').append('<option value="'+index+'">'+value+'</option>'),++i;}),void 0===socialWarfarePlugin.lastClass&&(console.log('boom'),socialWarfarePlugin.lastClass='swp_flatFresh swp_d_fullColor swp_i_fullColor swp_o_fullColor');var buttonsClass='swp_'+visualTheme+' swp_d_'+dColorSet+' swp_i_'+iColorSet+' swp_o_'+oColorSet;$('.nc_socialPanel').removeClass(socialWarfarePlugin.lastClass).addClass(buttonsClass),socialWarfarePlugin.lastClass=buttonsClass;});}function updateScale(){$('select[name="buttonSize"],select[name="buttonFloat"]').on('change',function(){$('.nc_socialPanel').css({width:'100%'});var width=$('.nc_socialPanel').width();var scale=$('select[name="buttonSize"]').val();var align=$('select[name="buttonFloat"]').val();var newWidth;align=='fullWidth'&&scale!=1||scale>=1?(newWidth=width/scale,$('.nc_socialPanel').css('cssText','width:'+newWidth+'px!important;'),$('.nc_socialPanel').css({transform:'scale('+scale+')','transform-origin':'left'})):align!='fullWidth'&&scale<1&&(newWidth=width/scale,$('.nc_socialPanel').css({transform:'scale('+scale+')','transform-origin':align})),socialWarfarePlugin.activateHoverStates();});}function updateCttDemo(){var $cttOptions=$('select[name="cttTheme"]');$cttOptions.on('change',function(){var newStyle=$('select[name="cttTheme"]').val();$('.swp_CTT').attr('class','swp_CTT').addClass(newStyle);}),$cttOptions.trigger('change');}function toggleRegistration(status,key){$('.registration-wrapper.'+key).attr('registration',status),'pro'==key&&($('.sw-admin-wrapper').attr('sw-registered',status),$('.sw-top-menu').attr('sw-registered',status));}function registerPlugin(key,item_id){var registered=!1;var data={action:'swp_register_plugin',security:swpAdminOptionsData.registerNonce,activity:'register',name_key:key,item_id:item_id,license_key:$('input[name="'+key+'_license_key"]').val()};return loadingScreen(),console.log(data),$.post(ajaxurl,data,function(response){console.log(response),response=JSON.parse(response),console.log(response),response.success?(toggleRegistration('1',key),registered=!0):alert('Failure: '+response.data),clearLoadingScreen();}),registered;}function unregisterPlugin(key,item_id){var unregistered=!1;var ajaxData={action:'swp_unregister_plugin',security:swpAdminOptionsData.registerNonce,activity:'unregister',name_key:key,item_id:item_id};return console.log(ajaxData),loadingScreen(),$.post(ajaxurl,ajaxData,function(response){console.log(response),response=JSON.parse(response),response.success?($('input[name="'+key+'_license_key"]').val(''),toggleRegistration('0',key),unregistered=!0):alert('Failure: '+response.data),clearLoadingScreen();}),unregistered;}function handleRegistration(){$('.register-plugin').on('click',function(){var key=$(this).attr('swp-addon');var item_id=$(this).attr('swp-item-id');return console.log(key),registerPlugin(key,item_id),!1;}),$('.unregister-plugin').on('click',function(){var key=$(this).attr('swp-addon');var item_id=$(this).attr('swp-item-id');return console.log(key),unregisterPlugin(key,item_id),!1;});}function sortableInit(){$('.sw-buttons-sort.sw-active').sortable({connectWith:'.sw-buttons-sort.sw-inactive',update:function(){saveColorToggle();}}),$('.sw-buttons-sort.sw-inactive').sortable({connectWith:'.sw-buttons-sort.sw-active',update:function(){saveColorToggle();}});}function getSystemStatus(){$('.sw-system-status').on('click',function(event){event.preventDefault?event.preventDefault():event.returnValue=!1,$('.system-status-wrapper').slideToggle(),selectText($('.system-status-container').get(0));});}function blockPremiumFeatures(){$('.sw-premium-blocker').tooltip({items:'.sw-premium-blocker',content:'<i></i>Unlock this feature by registering your license.',position:{my:'center top',at:'center top'},tooltipClass:'sw-admin-hover-notice',open:function(event,ui){if(event.originalEvent===void 0)return!1;var $id=$(ui.tooltip).attr('id');$('div.ui-tooltip').not('#'+$id).remove();},close:function(event,ui){ui.tooltip.hover(function(){$(this).stop(!0).fadeTo(400,1);},function(){$(this).fadeOut('400',function(){$(this).remove();});});}});}function customUploaderInit(){var customUploader;$('.swp_upload_image_button').click(function(e){e.preventDefault();var inputField=$(this).attr('for');if(customUploader){customUploader.open();return;}customUploader=wp.media.frames.file_frame=wp.media({title:'Choose Image',button:{text:'Choose Image'},multiple:!1}),customUploader.on('select',function(){var attachment=customUploader.state().get('selection').first().toJSON();$('input[name="'+inputField+'"').val(attachment.url);}),customUploader.open();});}function set_ctt_preview(){var preview=$('#ctt_preview');var select=$('select[name=cttTheme]');preview.length||(preview=$('<style id="ctt_preview"></style>'),$('head').append(preview)),$(select).val()==='none'&&update_ctt_preview(),$(select).on('change',function(e){e.target.value==='none'&&update_ctt_preview();}),$('textarea').on('keyup',update_ctt_preview);}function update_ctt_preview(){var preview=$('#ctt_preview');var textarea=$('textarea[name=cttCSS]');$(preview).text($(textarea).val());}$(document).ready(function(){handleSettingSave(),populateOptions(),headerMenuInit(),tabNavInit(),checkboxesInit(),updateButtonPreviews(),conditionalFields(),updateCttDemo(),updateScale(),handleRegistration(),sortableInit(),getSystemStatus(),blockPremiumFeatures(),customUploaderInit(),set_ctt_preview();});}(this,jQuery));